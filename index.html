<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–ê–ª—Ö–∏–º–∏—è</title>
<style>
body, html {margin:0;padding:0;font-family:Arial, sans-serif;background:#fafafa;color:#333;}
#menu, #game, #inventory, #store, #recipes, #settings, #daily, #leaderboard {display:none;padding:20px;}
header {background:#4CAF50;color:white;padding:10px;text-align:center;}
button {padding:10px;margin:5px;}
.grid {display:flex;flex-wrap:wrap;gap:10px;}
.item {width:60px;height:60px;font-size:32px;display:flex;align-items:center;justify-content:center;border:1px solid #ccc;border-radius:8px;background:white;cursor:grab;}
#board {min-height:300px;border:2px dashed #ccc;padding:10px;margin-top:10px;display:flex;flex-wrap:wrap;gap:10px;}
#adOverlay {position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.8);color:white;display:flex;align-items:center;justify-content:center;font-size:24px;z-index:1000;display:none;flex-direction:column;}
</style>
</head>
<body>
<header>–ê–ª—Ö–∏–º–∏—è</header>
<div id="mainmenu">
<button onclick="show('menu')">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
<button onclick="show('recipes')">–ö–Ω–∏–≥–∞ —Ä–µ—Ü–µ–ø—Ç–æ–≤</button>
<button onclick="show('inventory')">–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</button>
<button onclick="show('store')">–ú–∞–≥–∞–∑–∏–Ω</button>
<button onclick="show('daily')">–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –Ω–∞–≥—Ä–∞–¥—ã</button>
<button onclick="show('leaderboard')">–õ–∏–¥–µ—Ä—ã</button>
<button onclick="show('settings')">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
</div>
<div id="menu">
<h2>–ê–ª—Ö–∏–º–∏—á–µ—Å–∫–∏–π —Å—Ç–æ–ª</h2>
<div id="board" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
</div>
<div id="inventory">
<h2>–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å <span id="coins"></span></h2>
<div id="items" class="grid"></div>
<button onclick="show('menu')">–ù–∞–∑–∞–¥</button>
</div>
<div id="store">
<h2>–ú–∞–≥–∞–∑–∏–Ω –ø–æ–¥—Å–∫–∞–∑–æ–∫</h2>
<p>–°—Ç–æ–∏–º–æ—Å—Ç—å –ø–æ–¥—Å–∫–∞–∑–∫–∏: 10 –º–æ–Ω–µ—Ç</p>
<button onclick="buyHint()">–ö—É–ø–∏—Ç—å –ø–æ–¥—Å–∫–∞–∑–∫—É</button>
<div id="hint"></div>
<button onclick="show('mainmenu')">–ù–∞–∑–∞–¥</button>
</div>
<div id="recipes">
<h2>–ö–Ω–∏–≥–∞ —Ä–µ—Ü–µ–ø—Ç–æ–≤</h2>
<ul id="recipeList"></ul>
<button onclick="show('mainmenu')">–ù–∞–∑–∞–¥</button>
</div>
<div id="settings">
<h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
<label>–ò–º—è –∏–≥—Ä–æ–∫–∞: <input id="playerName"/></label>
<button onclick="saveSettings()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
<button onclick="show('mainmenu')">–ù–∞–∑–∞–¥</button>
</div>
<div id="daily">
<h2>–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –Ω–∞–≥—Ä–∞–¥—ã</h2>
<div id="calendar"></div>
<button onclick="claimDaily()">–ü–æ–ª—É—á–∏—Ç—å –Ω–∞–≥—Ä–∞–¥—É</button>
<button onclick="show('mainmenu')">–ù–∞–∑–∞–¥</button>
</div>
<div id="leaderboard">
<h2>–¢–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤</h2>
<ol id="leaders"></ol>
<button onclick="show('mainmenu')">–ù–∞–∑–∞–¥</button>
</div>
<div id="adOverlay"><div id="adText"></div><div id="adTimer"></div></div>
<script>
const baseElements = {"–û–≥–æ–Ω—å":"üî•","–í–æ–¥–∞":"üíß","–ó–µ–º–ª—è":"ü™®","–í–æ–∑–¥—É—Ö":"üå¨Ô∏è"};
let recipes = {
"–û–≥–æ–Ω—å+–í–æ–¥–∞":{"name":"–ü–∞—Ä","emoji":"üí®","desc":"–ì–æ—Ä—è—á–∏–π –ø–∞—Ä"},
"–í–æ–¥–∞+–ó–µ–º–ª—è":{"name":"–ì—Ä—è–∑—å","emoji":"ü™±","desc":"–ú–æ–∫—Ä–∞—è –∑–µ–º–ª—è"},
"–í–æ–∑–¥—É—Ö+–û–≥–æ–Ω—å":{"name":"–≠–Ω–µ—Ä–≥–∏—è","emoji":"‚ö°","desc":"–ú–æ–ª–Ω–∏—è"}
};
let inventory = JSON.parse(localStorage.getItem('inventory'))||{};
let coins = parseInt(localStorage.getItem('coins')||'0');
let discovered = JSON.parse(localStorage.getItem('discovered'))||{};
function init(){if(!localStorage.getItem('player'))localStorage.setItem('player','–ò–≥—Ä–æ–∫');document.getElementById('playerName').value=localStorage.getItem('player');for(let k in baseElements){if(!inventory[k])inventory[k]=1;discovered[k]=true;}saveData();updateInventory();updateRecipes();updateCoins();loadLeaderboard();checkDaily();}
function saveData(){localStorage.setItem('inventory',JSON.stringify(inventory));localStorage.setItem('coins',coins);localStorage.setItem('discovered',JSON.stringify(discovered));}
function updateInventory(){let div=document.getElementById('items');div.innerHTML='';for(let k in inventory){let el=document.createElement('div');el.className='item';el.draggable=true;el.ondragstart=ev=>drag(ev,k);el.ondblclick=()=>duplicate(k);el.innerText=baseElements[k]||recipes[k]?.emoji||'‚ùì';el.title=k+ (inventory[k]>1?' x'+inventory[k]:'');div.appendChild(el);}document.getElementById('coins').innerText=`–ú–æ–Ω–µ—Ç—ã: ${coins}`;}
function updateRecipes(){let ul=document.getElementById('recipeList');ul.innerHTML='';for(let comb in recipes){if(discovered[recipes[comb].name]){let li=document.createElement('li');li.textContent=`${comb} => ${recipes[comb].name} ${recipes[comb].emoji} - ${recipes[comb].desc}`;ul.appendChild(li);}}
}
function drag(ev,name){ev.dataTransfer.setData('text',name);}function allowDrop(ev){ev.preventDefault();}function drop(ev){ev.preventDefault();let name=ev.dataTransfer.getData('text');createOnBoard(name);}function createOnBoard(name){let el=document.createElement('div');el.className='item';el.innerText=baseElements[name]||recipes[name]?.emoji||'‚ùì';el.onclick=()=>remove(el);el.ondblclick=()=>duplicate(name);el.dataset.name=name;document.getElementById('board').appendChild(el);}function remove(el){el.remove();}
function duplicate(name){inventory[name]=(inventory[name]||0)+1;saveData();updateInventory();}
function combine(a,b){let key=a+"+"+b;let r=recipes[key];if(r){inventory[r.name]=(inventory[r.name]||0)+1;discovered[r.name]=true;coins++;saveData();updateInventory();updateRecipes();showAd('inter');}}
document.getElementById('board').addEventListener('dragend',function(ev){let board=document.getElementById('board');let items=board.querySelectorAll('.item');if(items.length>=2){let a=items[items.length-2].dataset.name;let b=items[items.length-1].dataset.name;combine(a,b);}});
function show(id){['menu','inventory','store','recipes','settings','daily','leaderboard','mainmenu'].forEach(x=>document.getElementById(x).style.display='none');document.getElementById(id).style.display='block';if(id==='inventory')updateInventory();}
function buyHint(){if(coins>=10){coins-=10;let unknown=Object.keys(recipes).filter(c=>!discovered[recipes[c].name]);if(unknown.length){let r=recipes[unknown[0]];document.getElementById('hint').innerText=`–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–æ–µ–¥–∏–Ω–∏—Ç—å ${unknown[0]}`;}else{document.getElementById('hint').innerText='–í—Å–µ —Ä–µ—Ü–µ–ø—Ç—ã –æ—Ç–∫—Ä—ã—Ç—ã';}saveData();updateCoins();}else alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç');}
function updateCoins(){document.querySelectorAll('#coins').forEach(el=>el.innerText=`–ú–æ–Ω–µ—Ç—ã: ${coins}`);}
function saveSettings(){localStorage.setItem('player',document.getElementById('playerName').value);show('mainmenu');}
function showAd(type){let overlay=document.getElementById('adOverlay');let text=document.getElementById('adText');let timer=document.getElementById('adTimer');overlay.style.display='flex';let t=type==='reward'?15:5;text.innerText=type==='reward'?'–†–µ–∫–ª–∞–º–Ω–æ–µ –≤–∏–¥–µ–æ':'–†–µ–∫–ª–∞–º–∞';let int=setInterval(()=>{timer.innerText=`${t--}...`;if(t<0){clearInterval(int);overlay.style.display='none';if(type==='reward'){coins+=5;updateCoins();saveData();}}},1000);}
function checkDaily(){let last=localStorage.getItem('lastDaily');let today=new Date().toDateString();if(last!==today){document.getElementById('calendar').innerText='–ú–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –Ω–∞–≥—Ä–∞–¥—É!';}else{document.getElementById('calendar').innerText='–ù–∞–≥—Ä–∞–¥–∞ –ø–æ–ª—É—á–µ–Ω–∞';}}
function claimDaily(){let today=new Date().toDateString();let last=localStorage.getItem('lastDaily');if(last!==today){coins+=3;localStorage.setItem('lastDaily',today);saveData();updateCoins();checkDaily();alert('–ù–∞–≥—Ä–∞–¥–∞ –ø–æ–ª—É—á–µ–Ω–∞!');}else alert('–£–∂–µ –ø–æ–ª—É—á–µ–Ω–æ');}
function loadLeaderboard(){let board=JSON.parse(localStorage.getItem('leaderboard'))||[];let player=localStorage.getItem('player');let count=Object.keys(discovered).length;let entry=board.find(b=>b.name===player);if(entry)entry.score=count;else board.push({name:player,score:count});board.sort((a,b)=>b.score-a.score);localStorage.setItem('leaderboard',JSON.stringify(board));let ol=document.getElementById('leaders');ol.innerHTML='';board.slice(0,10).forEach(b=>{let li=document.createElement('li');li.textContent=`${b.name}: ${b.score}`;ol.appendChild(li);});}
window.onload=init;
</script>
</body>
</html>
